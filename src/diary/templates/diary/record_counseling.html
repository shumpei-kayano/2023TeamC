<!-- 過去のカウンセリング日記詳細 -->
{% extends "base.html" %}

{% load static%}

{% block title %}日記詳細{% endblock %}

{% block header %}
<header>
    <div class="header__button">
        <div class="header__back__img">
            {% comment %} calendar_month.htmlまたはcalendar_week.htmlに遷移させてください {% endcomment %}
            <a href="">
                <svg width="9" height="16" viewBox="0 0 9 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0.292893 8.70711C-0.097631 8.31658 -0.097631 7.68342 0.292893 7.29289L6.65685 0.928932C7.04738 0.538408 7.68054 0.538408 8.07107 0.928932C8.46159 1.31946 8.46159 1.95262 8.07107 2.34315L2.41421 8L8.07107 13.6569C8.46159 14.0474 8.46159 14.6805 8.07107 15.0711C7.68054 15.4616 7.04738 15.4616 6.65685 15.0711L0.292893 8.70711ZM2 9L1 9L1 7L2 7L2 9Z" fill="white"/>
                </svg>
                戻る</a>
        </div>
    </div>
    <!-- カレンダーから選択した日付・天気を表示してください。 -->
    <h1 class="date">--/--(-)</h1>
    <div class="header__weather">
        <img class="weatherImg">
        <span class="tempMax">-℃</span>
    </div>
</header>
{% endblock %}

{% block content %}
<!-- タブ -->
<div class="tab__button">
    <div class="tab__button--left">
        <button type="button" onclick="location.href='{% url 'record_counseling.htmlに遷移させてください' %}'">
            日記詳細</button>
    </div>
    <div class="tab__button--right">
        <button type="button" onclick="location.href='{% url 'record_counseling_graph.htmlに遷移させてください' %}'">
            グラフ</button>
    </div>
</div>

<!-- 編集削除ボタン -->
<div class="content__today-diary__group">
    <div class="icon__button">
        <div class="icon__button__delete">
            <a href="{% url  diary_delete.htmlに遷移させてください %}">
                <img src="{% static'diary/assets/delete.png' %}">削除</a>
        </div>
        <div class="icon__button__edit">
            <a href="{% url  diary_update.htmlに遷移させてください %}">
                <img src="{% static'diary/assets/edit.png' %}">編集</a>
        </div>
    </div>

    <!-- ユーザーが保存した日記の表示 -->
    <div class="content__today-diary__text">
        <p>
            {{ ユーザーが入力した日記を表示させてください }}
        </p>
    </div>

    <!-- ユーザーが保存した画像の表示 -->
    {% if 画像があれば %}
        <div class="content__today-diary__images">
            {% for 画像を表示させてください %}
                <div class="content__today-diary__img">
                    <a href="#" data-image-id="{{ 画像のid }}">
                    <img src="{{ ユーザーが保存した画像を表示させてください }}" alt="日記の画像">
                    </a>
                </div>
            {% endfor %}
        </div>
    {% endif %}
</div><!-- content__today-diary__group -->

<!-- ネココのカウンセリングコメント -->
<div class="content__today-diary__counseling-comment">
    <p>
        {{ カウンセリングのコメントを表示させてください }}
    </p>
</div>
<!-- ネコココメントの画像 -->
<div class="content__today-diary__comment__img">
    <img src="{% static'diary/assets/counselor_neko.png' %}" alt="カウンセラーネココの画像">
</div>

<!-- 画像のポップアップ -->
<div class="modal fade" id="image-modal" tabindex="-1" role="dialog" aria-labelledby="image-modal-label" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <img src="" id="image-modal-image" class="img-fluid" alt="">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">閉じる</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block js%}
<script>
    // 画像をクリックしたときに画像ポップアップを開く
    $(".content__today-diary__images a").on("click", function(e) {
    // 画像ポップアップのコンテンツを取得
    let image = $(this).data("image-id");
    let imageUrl = $("#diary-{{ diary.id }}-image-{{ image }}").attr("src");

    // 画像ポップアップを開く
    $("#image-modal-image").attr("src", imageUrl);
    $("#image-modal").modal("show");

    // イベントをキャンセル
    e.preventDefault();
    });
</script>
{% endblock %}