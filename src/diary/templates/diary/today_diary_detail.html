<!-- 日記詳細画面 ネココポジティブコメント画面（ホーム） -->
{% extends "base_diary.html" %}

{% load static%}

{% block title %}日記詳細{% endblock %}

{% block css %}
<!-- ページ固有のCSSを読み込み -->
<link rel="stylesheet" href="{% static 'diary/css/home-page.css' %}">
{% endblock %}

{% block header %}
<header>
    <div class="header__spacer--top"></div>
    <h1 class="date">--/--(-)</h1>
    <div class="header__weather">
        <img class="weatherImg">
        <span class="tempMax">-℃</span>
    </div>
</header>
{% endblock %}

{% block content %}
<main class="ground ground--blue"><!-- 追加した要素 -->
    <div class="scroll--content">

        <!-- タブ -->
        {% url 'diary:today_diary_detail'  pk=diary.id as today_diary_detail_url %}
        {% url 'diary:today_diary_graph'  pk=diary.id as today_diary_graph_url %}
        <div class="tab__button a--tab">
            <div class="a--tab--left {% if request.path == today_diary_detail_url %}active{% endif %}">
                <a href="{{ today_diary_detail_url }}">日記詳細画面</a>
            </div>
            <div class="a--tab--right {% if request.path == today_diary_graph_url %}active{% endif %}">
                <a href="{{ today_diary_graph_url }}">グラフ</a>
            </div>
        </div>

        <div class="content__today-diary__text">
            <!-- 編集削除ボタン -->
            <div class="delete-edit__btn">
                <div class="delete-edit__btn__spacer">
                    <a class="icon__delete-btn" href="{% url  'diary:diary_delete' diary.id %}">
                        <svg class="delete__icon" width="16" height="14" viewBox="0 0 12 15" xmlns="http://www.w3.org/2000/svg">
                            <path d="M1.25004 13.0417C1.25004 13.9125 1.96254 14.625 2.83337 14.625H9.16671C10.0375 14.625 10.75 13.9125 10.75 13.0417V3.54167H1.25004V13.0417ZM3.19754 7.405L4.31379 6.28875L6.00004 7.96708L7.67837 6.28875L8.79462 7.405L7.11629 9.08333L8.79462 10.7617L7.67837 11.8779L6.00004 10.1996L4.32171 11.8779L3.20546 10.7617L4.88379 9.08333L3.19754 7.405ZM8.77087 1.16667L7.97921 0.375H4.02087L3.22921 1.16667H0.458374V2.75H11.5417V1.16667H8.77087Z"/>
                        </svg>削除</a>
                </div>
                <div class="delete-edit__btn__spacer">
                    <a class="icon__edit-btn" href="{% url  'diary:diary_update' diary.id %}">
                        <svg class="edit__icon" width="17" height="14" viewBox="0 0 16 15" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9.63083 5.14083L10.3592 5.86917L3.18667 13.0417H2.45833V12.3133L9.63083 5.14083ZM12.4808 0.375C12.2829 0.375 12.0771 0.454167 11.9267 0.604583L10.4779 2.05333L13.4467 5.02208L14.8954 3.57333C15.2042 3.26458 15.2042 2.76583 14.8954 2.45708L13.0429 0.604583C12.8846 0.44625 12.6867 0.375 12.4808 0.375ZM9.63083 2.90042L0.875 11.6562V14.625H3.84375L12.5996 5.86917L9.63083 2.90042Z"/>
                        </svg>編集</a>
                </div>
            </div>

            {% if diary %}
                <samll class="created-date">作成日時：{{diary.created_date}}</samll>
                <!-- 日記内容 -->
                <p>{{ diary.content }}</p>
                <div class="content__today-diary__img">
                    {% if diary.photo1 %}
                        <div class="content__today-diary__item">
                            <!-- 画像のポップアップ -->
                            <div class="layer js-modal">
                                <div class="modal">
                                    <div class="modal__inner">
                                        <div class="modal__contents">
                                            <div class="modal__content">
                                                <img class="content__today-diary__item" src="{{ diary.photo1.url }}" alt="Diary Photo1">
                                            </div>
                                        </div>

                                        <div class="modal__button-wrap">
                                            <button class="close-button js-close-button">閉じる
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <button class="button button--js-modal-button">
                                <img src="{{ diary.photo1.url }}" alt="Diary Photo1">
                            </button>
                        </div>
                    {% endif %}
                    {% if diary.photo2 %}
                        <div class="content__today-diary__item">
                            <!-- 画像のポップアップ -->
                            <div class="layer js-modal">
                                <div class="modal">
                                    <div class="modal__inner">
                                        <div class="modal__contents">
                                            <div class="modal__content">
                                                <img class="content__today-diary__item" src="{{ diary.photo1.url }}" alt="Diary Photo1">
                                            </div>
                                        </div>

                                        <div class="modal__button-wrap">
                                            <button class="close-button js-close-button">閉じる
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <button class="button button--js-modal-button">
                                <img src="{{ todya.photo2.url }}" alt="Diary Photo2">
                            </button>
                        </div>
                    {% endif %}
                    {% if diary.photo3 %}
                        <div class="content__today-diary__item">
                            <!-- 画像のポップアップ -->
                            <div class="layer js-modal">
                                <div class="modal">
                                    <div class="modal__inner">
                                        <div class="modal__contents">
                                            <div class="modal__content">
                                                <img class="content__today-diary__item" src="{{ diary.photo1.url }}" alt="Diary Photo1">
                                            </div>
                                        </div>

                                        <div class="modal__button-wrap">
                                            <button class="close-button js-close-button">閉じる
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <button class="button button--js-modal-button">
                                <img src="{{ diary.photo3.url }}" alt="Diary Photo3">
                            </button>
                        </div>
                    {% endif %}
                    {% if diary.photo4 %}
                        <div class="content__today-diary__item">
                            <!-- 画像のポップアップ -->
                            <div class="layer js-modal">
                                <div class="modal">
                                    <div class="modal__inner">
                                        <div class="modal__contents">
                                            <div class="modal__content">
                                                <img class="content__today-diary__item" src="{{ diary.photo1.url }}" alt="Diary Photo1">
                                            </div>
                                        </div>

                                        <div class="modal__button-wrap">
                                            <button class="close-button js-close-button">閉じる
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <button class="button button--js-modal-button">
                                <img src="{{ todya.photo4.url }}" alt="Diary Photo4">
                            </button>
                        </div>
                    {% endif %}
                </div>
            {% else %}
                <p>日記は記録されていません</p>
            {% endif %}
        </div><!-- content__today-diary__text -->

        {% comment %} 特定のワードが含まれていたらピンクのネコちゃん {% endcomment %}
        {% if diary.counseling %}
            <!-- ネコココメント -->
            <div class="content__diary__comment--counseling">
                <div class="content__diary__ccomment--counseling__p">
                    <p>
                        {{ diary.ai_comment }}
                    </p>
                </div>
            </div>
            <div class="content__diary__comment__img">
                <img class="content__diary__comment__img-item" src="{% static 'diary/assets/counselor_neko.svg' %}" alt="ネココの画像">
            </div>
        {% comment %} それ以外だと黄色ネコちゃん {% endcomment %}
        {% else %}
            <!-- ネコココメント -->
            <div class="content__diary__comment">
                <div class="content__diary__ccomment__p">
                    <p>
                        {{ diary.ai_comment }}
                    </p>
                </div>
            </div>
            <div class="content__diary__comment__img">
                <img class="content__diary__comment__img-item" src="{% static 'diary/assets/neko_comment.svg' %}" alt="ネココの画像">
            </div>
        {% endif %}

    </div><!-- scroll content -->
</main>
{% endblock %}

{% block js %}
<script>
// layer要素に付与したjs-modalクラスを取得し変数に格納
const modal = document.querySelector('.js-modal');
// button要素に付与したjs-modal-buttonクラスを取得し、変数に格納
const modalButton = document.querySelector('.button--js-modal-button');
// button要素に付与したjs-close-buttonクラスを取得し、変数に格納
const modalClose = document.querySelector('.js-close-button');

// モーダルボタンをクリックしたときのイベントを登録
modalButton.addEventListener('click', () => {
    modal.classList.add('is-open');
});

// 閉じるボタンをクリックしたときのイベントを登録
modalClose.addEventListener('click', () => {
    modal.classList.remove('is-open');
});
</script>
{% endblock %}