{% extends 'base.html' %}

{% load i18n %}

{% load static %}

{% block title %}パスワードリセット{% endblock title %}

{% block head %}<link type="text/css" rel="stylesheet" href="{% static 'css/accounts-style.css' %}">{% endblock head %}

{% block content %}
{% comment %} <section class="section-accounts" id="section-signup"> {% endcomment %}
<section>
    <main class="ground ground--blue">

        <div class="wrapperHeader">
            <div class="header__back__img">
                <a href="#" onclick="history.back(); ">
                    <img src="{% static 'user/assets/back_arrow.svg' %}"><span>戻る</span></a>
            </div>
            <img src="{% static 'user/assets/fugoo.svg' %}" alt="logo" class="logo-img">
        </div>

    <article id="password_reset__article">
    <div class="wrapper-accounts-form">
        <p class="signup-text">パスワード変更</p>
    {% comment %} <h1>{% trans "Password Reset" %}</h1>
    {% if user.is_authenticated %}
    {% include "account/snippets/already_logged_in.html" %}
    {% endif %}
    {% endcomment %}

    {% comment %} <p>{% trans "Forgotten your password? Enter your email address below, and we'll send you an email allowing you to reset it." %}</p> {% endcomment %}
    <div class="form__password">
        <p>ご登録されているメールアドレスを入力してください</p>
    </div>

    <form method="POST" action="{% url 'account_reset_password' %}" class="password_reset">
        {% csrf_token %}
        <div class="form__email">
            {{ form.errors.email }}
            <label for="id_email">メールアドレス</label>
            <input type="email" name="email" placeholder="メールアドレス" autocomplete="email" required="" id="id_email">
        </div>
        <div class="btn btn--blue" id="login__btn--blue">
            {% comment %} <input type="submit" value="{% trans 'Reset My Password' %}" /> {% endcomment %}
            <button type="submit" id="reset-button">変更申請メールを送信</button>
            <!-- 入力に不備があってもロード画面が表示してしまう -->
            {% comment %} <div id="loading">
                <img id = "logo" src="{% static 'user/assets/logo.svg'%}" alt="Loading Image">
                <div class="loading-content">
                    <img id = "teacat" src="{% static 'user/assets/tea_neko.svg'%}" alt="Loading Image">
                    <p class="loading__text">メール送信中にゃ</P>
                    <span class="dli-loading-1"></span>
                </div>
            </div> {% endcomment %}
        </div>

        <div id="password_reset__back-home" class="back-home">
            <a class="backToHome" href="{% url 'user:account_top' %}">トップページに戻る</a>    
        </div>
    </div>
    </form>
    </article>

</main>
</section>
{% endblock content %}

{% comment %} {% block js %}
<script>
    document.getElementById('reset-button').addEventListener('click', function (event) {
        // ボタンがクリックされたらローディング画面を表示
        document.getElementById('loading').style.display = 'block';
        // アニメーションを開始
        document.querySelector('.dli-loading-1').classList.add('rotate-animation');
    });
</script>
{% endblock js %} {% endcomment %}


